---
layout: default
title: PhpMetrics with Jenkins
---

<div class="mui-panel">
    <h1>PhpMetrics and Jenkins</h1>

    <ol>
        <li><a href="#build">Build</a></li>
        <li><a href="#plots">Plots</a></li>
        <li><a href="#violations">Violations</a></li>
        <li><a href="#html-report">HTML Report</a></li>
    </ol>

    <section id="build">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>1. Build</h2>
                    <hr class="star-primary">
                </div>
                <div class="col-lg-12">

                    <p>The first step is to launch PhpMetrics during build.</p>

                    <p>To do this, select "Run Shell Script" and insert the following code in the text box that appears:</p>

{% highlight bash %}
#!/bin/bash
mkdir -p build
wget {{ site.phpmetrics_repo }}/raw/master/build/metrics.phar
php metrics.phar --report-html=build/phpmetrics.html --report-xml=build/phpmetrics.xml --violations-xml=build/violations.xml
{% endhighlight %}

                </div>
            </div>

        </div>
    </section>


    <section id="plots">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>2. Plots</h2>
                    <hr class="star-primary">
                </div>
                <div class="col-lg-12">

                    <p>Monitor certain indicators of your project is very easy!</p>

                    <p>For example, if you want to monitor the Maintainability Index of your project, you need to add the <strong>Plot build data</strong> PostBuild task:</p>

                    <img src="{{site.url}}/images/documentation/jenkins/jenkins-phpmetrics-plot-build-data.png" alt="Jenkins with PhpMetrics - plot" width="100%" />
                </div>
            </div>

        </div>
    </section>



    <section id="violations">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>3. Violations</h2>
                    <hr class="star-primary">
                </div>
                <div class="col-lg-12">

                    <p>PhpMetrics can export results in the PhpMessDetector violations output format.</p>

                    <p>You need to enable the <a href="http://wiki.jenkins-ci.org/display/JENKINS/Violations">Jenkins Violations plugin</a></p>.

                    <p>
                        Then add the <strong>Report violations</strong> PostBuild task as following:
                    </p>

                    <img src="{{site.url}}/images/documentation/jenkins/jenkins-phpmetrics-violations.png" alt="Jenkins with PhpMetrics - violations" width="100%" />
                </div>
            </div>

        </div>
    </section>





    <section id="html-report">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>4. HTML Report</h2>
                    <hr class="star-primary">
                </div>
                <div class="col-lg-12">

                    <p>PhpMetrics provides a beatiful HTML report file.</p>

                    <p>If you want to add a link to this report in the sidebar, you need to install the <a href="http://wiki.jenkins-ci.org/display/JENKINS/Sidebar-Link+Plugin">Sidebar link plugin</a>.

                    <p>
                        Then add a sidebar link in on configuration screen:
                    </p>

                    <img src="{{site.url}}/images/documentation/jenkins/jenkins-phpmetrics-sidebar-report.png" alt="Jenkins with PhpMetrics - violations"  />
                </div>
            </div>

        </div>
    </section>
</div>
